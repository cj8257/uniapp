{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../Downloads/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"button-group\">\r\n\t\t\t<view class=\"button-item\" @click=\"handleBorrow\">\r\n\t\t\t\t<view class=\"circle-button borrow\">\r\n\t\t\t\t\t<text class=\"button-text\">借</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"button-item\" @click=\"handleReturn\">\r\n\t\t\t\t<view class=\"circle-button return\">\r\n\t\t\t\t\t<text class=\"button-text\">还</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"statistics\">\r\n\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t<text class=\"stat-number\">{{borrowedCount}}</text>\r\n\t\t\t\t<text class=\"stat-label\">借用设备</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t<text class=\"stat-number overdue\">{{overdueCount}}</text>\r\n\t\t\t\t<text class=\"stat-label\">逾期设备</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tborrowedCount: 0,\r\n\t\t\t\toverdueCount: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleBorrow() {\r\n\t\t\t\t// 检查登录状态\r\n\t\t\t\tconst token = uni.getStorageSync('token')\r\n\t\t\t\tif (!token) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 调用扫码API\r\n\t\t\t\tuni.scanCode({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t// 处理扫码结果\r\n\t\t\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\t\t\titemList: ['7天', '15天', '30天'],\r\n\t\t\t\t\t\t\tsuccess: async (e) => {\r\n\t\t\t\t\t\t\t\tconst days = [7, 15, 30][e.tapIndex];\r\n\t\t\t\t\t\t\t\t// TODO: 调用后端API保存借用记录\r\n\t\t\t\t\t\t\t\tconst userInfo = uni.getStorageSync('userInfo')\r\n\t\t\t\t\t\t\t\tconsole.log(userInfo);\r\n\t\t\t\t\t\t\t\tconst {msg, mount, overCount} = await this.$api.device_borrow({\r\n\t\t\t\t\t\t\t\t\tcode: res.result,\r\n\t\t\t\t\t\t\t\t\tdays: days,\r\n\t\t\t\t\t\t\t\t\tphone: userInfo.phone,\r\n\t\t\t\t\t\t\t\t\tusername: userInfo.username\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: msg,\r\n\t\t\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.borrowedCount = mount\r\n\t\t\t\t\t\t\t\tthis.overdueCount = overCount\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: (e) => {\r\n\t\t\t\t\t\t\t\tconsole.log(e.errMsg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleReturn() {\r\n\t\t\t\t// 检查登录状态\r\n\t\t\t\tconst token = uni.getStorageSync('token')\r\n\t\t\t\tif (!token) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 调用扫码API\r\n\t\t\t\tuni.scanCode({\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\t// TODO: 调用后端API处理归还逻辑\r\n\t\t\t\t\t\tconst userInfo = uni.getStorageSync('userInfo')\r\n\t\t\t\t\t\tconst {msg, mount, overCount} = await this.$api.device_return({\r\n\t\t\t\t\t\t\tcode: res.result,\r\n\t\t\t\t\t\t\tphone: userInfo.phone,\r\n\t\t\t\t\t\t\tusername: userInfo.username\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: msg,\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.borrowedCount = mount\r\n\t\t\t\t\t\tthis.overdueCount = overCount\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onShow() {\r\n\t\t\t// TODO: 获取用户设备统计信息\r\n\t\t\tconst userInfo = uni.getStorageSync('userInfo')\r\n\t\t\tconst {count, overdueCount} = await this.$api.device_all({\r\n\t\t\t\tphone: userInfo.phone,\r\n\t\t\t\tusername: userInfo.username\r\n\t\t\t})\r\n\t\t\tconsole.log(count, overdueCount);\r\n\t\t\tthis.borrowedCount = count\r\n\t\t\tthis.overdueCount = overdueCount\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.container {\r\n\t\tpadding: 40rpx;\r\n\t\t\r\n\t\t.button-group {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-bottom: 60rpx;\r\n\t\t\t\r\n\t\t\t.button-item {\r\n\t\t\t\tmargin: 20rpx 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.circle-button {\r\n\t\t\t\twidth: 400rpx;\r\n\t\t\t\theight: 400rpx;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\t\r\n\t\t\t\t&.borrow {\r\n\t\t\t\t\tbackground-color: #FF4D4F;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t&.return {\r\n\t\t\t\t\tbackground-color: #52C41A;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.button-text {\r\n\t\t\t\t\tcolor: #FFFFFF;\r\n\t\t\t\t\tfont-size: 100rpx;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.statistics {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-around;\r\n\t\t\tbackground-color: #FFFFFF;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.1);\r\n\t\t\t\r\n\t\t\t.stat-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\t\r\n\t\t\t\t.stat-number {\r\n\t\t\t\t\tfont-size: 48rpx;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tcolor: #333333;\r\n\t\t\t\t\t\r\n\t\t\t\t\t&.overdue {\r\n\t\t\t\t\t\tcolor: #FF4D4F;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.stat-label {\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: #666666;\r\n\t\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/admin/Desktop/办公管理/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA6BC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,eAAe;AAEd,YAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACxC,UAAI,CAAC,OAAO;AACXA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK;AAAA,SACL;AACD;AAAA,MACD;AAGAA,oBAAAA,MAAI,SAAS;AAAA,QACZ,SAAS,CAAC,QAAQ;AACjBA,wBAAAA,MAAY,MAAA,OAAA,+BAAA,GAAG;AAEfA,wBAAAA,MAAI,gBAAgB;AAAA,YACnB,UAAU,CAAC,MAAM,OAAO,KAAK;AAAA,YAC7B,SAAS,OAAO,MAAM;AACrB,oBAAM,OAAO,CAAC,GAAG,IAAI,EAAE,EAAE,EAAE,QAAQ;AAEnC,oBAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9CA,4BAAAA,MAAY,MAAA,OAAA,+BAAA,QAAQ;AACpB,oBAAM,EAAC,KAAK,OAAO,UAAS,IAAI,MAAM,KAAK,KAAK,cAAc;AAAA,gBAC7D,MAAM,IAAI;AAAA,gBACV;AAAA,gBACA,OAAO,SAAS;AAAA,gBAChB,UAAU,SAAS;AAAA,eACnB;AACDA,4BAAAA,MAAI,UAAU;AAAA,gBACb,OAAO;AAAA,gBACP,MAAM;AAAA,gBACN,UAAU;AAAA,eACV;AACD,mBAAK,gBAAgB;AACrB,mBAAK,eAAe;AAAA,YACpB;AAAA,YACD,MAAM,CAAC,MAAM;AACZA,4BAAY,MAAA,MAAA,OAAA,+BAAA,EAAE,MAAM;AAAA,YACrB;AAAA,WACA;AAAA,QACF;AAAA,OACA;AAAA,IACD;AAAA,IACD,eAAe;AAEd,YAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACxC,UAAI,CAAC,OAAO;AACXA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK;AAAA,SACL;AACD;AAAA,MACD;AAGAA,oBAAAA,MAAI,SAAS;AAAA,QACZ,SAAS,OAAO,QAAQ;AAEvB,gBAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9C,gBAAM,EAAC,KAAK,OAAO,UAAS,IAAI,MAAM,KAAK,KAAK,cAAc;AAAA,YAC7D,MAAM,IAAI;AAAA,YACV,OAAO,SAAS;AAAA,YAChB,UAAU,SAAS;AAAA,WACnB;AACDA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,WACN;AACD,eAAK,gBAAgB;AACrB,eAAK,eAAe;AAAA,QACrB;AAAA,OACA;AAAA,IACF;AAAA,EACA;AAAA,EACD,MAAM,SAAS;AAEd,UAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9C,UAAM,EAAC,OAAO,aAAY,IAAI,MAAM,KAAK,KAAK,WAAW;AAAA,MACxD,OAAO,SAAS;AAAA,MAChB,UAAU,SAAS;AAAA,KACnB;AACDA,kBAAA,MAAA,MAAA,OAAA,gCAAY,OAAO,YAAY;AAC/B,SAAK,gBAAgB;AACrB,SAAK,eAAe;AAAA,EACrB;AACD;;;;;;;;;;ACxHD,GAAG,WAAW,eAAe;"}