{"version":3,"file":"my.js","sources":["pages/my/my.vue","../../Downloads/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXkudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"user-info\">\r\n\t\t\t<block v-if=\"isLoggedIn\">\r\n\t\t\t\t<image class=\"avatar\" :src=\"userInfo.avatar || '/static/user/默认.webp'\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t<text class=\"nickname\">{{userInfo.nickname}}</text>\r\n\t\t\t\t\t<text class=\"department\">{{userInfo.department}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t\t<block v-else>\r\n\t\t\t\t<view class=\"login-btn\" @click=\"handleLogin\">\r\n\t\t\t\t\t<text>点击登录</text>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"menu-list\">\r\n\t\t\t<!-- 管理员功能区域 -->\r\n\t\t\t<!-- 管理员功能区域 -->\r\n<view class=\"admin-section\" v-if=\"isAdmin\">\r\n    <view class=\"section-title\">管理员功能</view>\r\n    <view class=\"menu-item\" @click=\"navigateTo('/pages/device/upload')\">\r\n        <text>设备信息上传</text>\r\n        <text class=\"arrow\">></text>\r\n    </view>\r\n    <view class=\"menu-item\" @click=\"navigateTo('/pages/device/overview')\">\r\n        <text>设备总览</text>\r\n        <text class=\"arrow\">></text>\t\r\n    </view>\r\n    <view class=\"menu-item\" @click=\"navigateTo('/pages/device/user')\">\r\n        <text>用户管理</text>\r\n        <text class=\"arrow\">></text>\r\n    </view>\r\n</view>\r\n\t\t\t\r\n\t\t\t<!-- 普通功能区域 -->\r\n\t\t\t<view class=\"menu-item\" @click=\"handleLogout\" v-if=\"isLoggedIn\">\r\n\t\t\t\t<text>退出登录</text>\r\n\t\t\t\t<text class=\"arrow\">></text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"menu-item\">\r\n\t\t\t\t<text>关于我们</text>\r\n\t\t\t\t<text class=\"arrow\">></text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisLoggedIn: false,\r\n\t\t\tisAdmin: false,\r\n\t\t\tuserInfo: {\r\n\t\t\t\tavatar: '',\r\n\t\t\t\tnickname: '',\r\n\t\t\t\tdepartment: ''\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\thandleLogin() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/login/login'\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleLogout() {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '确定要退出登录吗？',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tuni.removeStorageSync('token')\r\n\t\t\t\t\t\tuni.removeStorageSync('userInfo')\r\n\t\t\t\t\t\tthis.isLoggedIn = false\r\n\t\t\t\t\t\tthis.isAdmin = false\r\n\t\t\t\t\t\tthis.userInfo = {\r\n\t\t\t\t\t\t\tavatar: '',\r\n\t\t\t\t\t\t\tnickname: '',\r\n\t\t\t\t\t\t\tdepartment: ''\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tnavigateTo(url) {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: url\r\n\t\t\t})\r\n\t\t},\r\n\t\tcheckLoginStatus() {\r\n\t\t\tconst token = uni.getStorageSync('token')\r\n\t\t\tconst userInfo = uni.getStorageSync('userInfo')\r\n\t\t\t\r\n\t\t\tif (userInfo) {\r\n\t\t\t\tthis.isLoggedIn = true\r\n\t\t\t\tthis.userInfo = userInfo\r\n\t\t\t\t// 检查是否是管理员\r\n\t\t\t\tthis.isAdmin = userInfo.role === 'admin'\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonShow() {\r\n\t\tthis.checkLoginStatus()\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.container {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #F5F5F5;\r\n\t\r\n\t.user-info {\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tpadding: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\t\r\n\t\t.avatar {\r\n\t\t\twidth: 120rpx;\r\n\t\t\theight: 120rpx;\r\n\t\t\tborder-radius: 60rpx;\r\n\t\t\tmargin-right: 30rpx;\r\n\t\t}\r\n\t\t\r\n\t\t.info {\r\n\t\t\t.nickname {\r\n\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tcolor: #333333;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.department {\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: #666666;\r\n\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.login-btn {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 120rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\t\r\n\t\t\ttext {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: #007AFF;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t.menu-list {\r\n\t\tbackground-color: #FFFFFF;\r\n\t\t\r\n\t\t.admin-section {\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\r\n\t\t\t.section-title {\r\n\t\t\t\tpadding: 20rpx 40rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: #999999;\r\n\t\t\t\tbackground-color: #F5F5F5;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.menu-item {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 30rpx 40rpx;\r\n\t\t\tborder-bottom: 1rpx solid #EEEEEE;\r\n\t\t\t\r\n\t\t\ttext {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: #333333;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.arrow {\r\n\t\t\t\tcolor: #999999;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t&:last-child {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style> ","import MiniProgramPage from 'C:/Users/admin/Desktop/办公管理/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAkDA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,UAAU;AAAA,QACT,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,YAAY;AAAA,MACb;AAAA,IACD;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,cAAc;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA,IACD,eAAe;AACdA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChBA,0BAAG,MAAC,kBAAkB,OAAO;AAC7BA,0BAAG,MAAC,kBAAkB,UAAU;AAChC,iBAAK,aAAa;AAClB,iBAAK,UAAU;AACf,iBAAK,WAAW;AAAA,cACf,QAAQ;AAAA,cACR,UAAU;AAAA,cACV,YAAY;AAAA,YACb;AAAA,UACD;AAAA,QACD;AAAA,OACA;AAAA,IACD;AAAA,IACD,WAAW,KAAK;AACfA,oBAAAA,MAAI,WAAW;AAAA,QACd;AAAA,OACA;AAAA,IACD;AAAA,IACD,mBAAmB;AACJA,oBAAG,MAAC,eAAe,OAAO;AACxC,YAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAE9C,UAAI,UAAU;AACb,aAAK,aAAa;AAClB,aAAK,WAAW;AAEhB,aAAK,UAAU,SAAS,SAAS;AAAA,MAClC;AAAA,IACD;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,iBAAiB;AAAA,EACvB;AACD;;;;;;;;;;;;;;;;;;;;;;;AC1GA,GAAG,WAAW,eAAe;"}