"use strict";const e=require("../../common/vendor.js"),o={data:()=>({borrowedCount:0,overdueCount:0}),methods:{handleBorrow(){e.index.getStorageSync("token")?e.index.scanCode({success:o=>{console.log(o),e.index.showActionSheet({itemList:["7天","15天","30天"],success:async n=>{const t=[7,15,30][n.tapIndex],s=e.index.getStorageSync("userInfo");console.log(s);const{msg:r,mount:a,overCount:u}=await this.$api.device_borrow({code:o.result,days:t,phone:s.phone,username:s.username});e.index.showToast({title:r,icon:"success",duration:2e3}),this.borrowedCount=a,this.overdueCount=u},fail:e=>{console.log(e.errMsg)}})}}):e.index.navigateTo({url:"/pages/login/login"})},handleReturn(){e.index.getStorageSync("token")?e.index.scanCode({success:async o=>{const n=e.index.getStorageSync("userInfo"),{msg:t,mount:s,overCount:r}=await this.$api.device_return({code:o.result,phone:n.phone,username:n.username});e.index.showToast({title:t,icon:"success"}),this.borrowedCount=s,this.overdueCount=r}}):e.index.navigateTo({url:"/pages/login/login"})}},async onShow(){const o=e.index.getStorageSync("userInfo"),{count:n,overdueCount:t}=await this.$api.device_all({phone:o.phone,username:o.username});console.log(n,t),this.borrowedCount=n,this.overdueCount=t}};const n=e._export_sfc(o,[["render",function(o,n,t,s,r,a){return{a:e.o(((...e)=>a.handleBorrow&&a.handleBorrow(...e))),b:e.o(((...e)=>a.handleReturn&&a.handleReturn(...e))),c:e.t(r.borrowedCount),d:e.t(r.overdueCount)}}]]);wx.createPage(n);
