"use strict";const e=require("../../common/vendor.js"),n={data:()=>({isLoggedIn:!1,isAdmin:!1,userInfo:{avatar:"",nickname:"",department:""}}),methods:{handleLogin(){e.index.navigateTo({url:"/pages/login/login"})},handleLogout(){e.index.showModal({title:"提示",content:"确定要退出登录吗？",success:n=>{n.confirm&&(e.index.removeStorageSync("token"),e.index.removeStorageSync("userInfo"),this.isLoggedIn=!1,this.isAdmin=!1,this.userInfo={avatar:"",nickname:"",department:""})}})},navigateTo(n){e.index.navigateTo({url:n})},checkLoginStatus(){e.index.getStorageSync("token");const n=e.index.getStorageSync("userInfo");n&&(this.isLoggedIn=!0,this.userInfo=n,this.isAdmin="admin"===n.role)}},onShow(){this.checkLoginStatus()}};const o=e._export_sfc(n,[["render",function(n,o,i,t,a,s){return e.e({a:a.isLoggedIn},a.isLoggedIn?{b:a.userInfo.avatar||"/static/user/默认.webp",c:e.t(a.userInfo.nickname),d:e.t(a.userInfo.department)}:{e:e.o(((...e)=>s.handleLogin&&s.handleLogin(...e)))},{f:a.isAdmin},a.isAdmin?{g:e.o((e=>s.navigateTo("/pages/device/upload"))),h:e.o((e=>s.navigateTo("/pages/device/overview"))),i:e.o((e=>s.navigateTo("/pages/device/user")))}:{},{j:a.isLoggedIn},a.isLoggedIn?{k:e.o(((...e)=>s.handleLogout&&s.handleLogout(...e)))}:{})}]]);wx.createPage(o);
